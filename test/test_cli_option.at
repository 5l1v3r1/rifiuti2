dnl -*- mode: m4; -*-
dnl Test suite for rifiuti2

AT_SETUP([Short Options])
AT_KEYWORDS([option])
_r2_check_empty_option([-?])
_r2_check_empty_option([-v])
_r2_check_option([-t :])
_r2_check_option([-n])
AT_CLEANUP

AT_SETUP([Long Options])
AT_KEYWORDS([option])
_r2_check_empty_option([--help-all])
_r2_check_option([--delimiter=:])
_r2_check_option([--no-heading])
AT_CLEANUP

AT_SETUP([Invalid options])
AT_KEYWORDS([option])
_r2_check_empty_option([--invalid-option],[1])
AT_CHECK([$progf -l foobar $sample/INFO2-sample2], [1], [], [ignore])
AT_CLEANUP

AT_SETUP([Wrong combinations])
AT_KEYWORDS([option])
_r2_check_option([-x -t :], [1])
_r2_check_option([-x -n], [1])
AT_CLEANUP

AT_SETUP([Err on no file args])
AT_KEYWORDS([file option])
_r2_check_ignore_err([-x], [1])
AT_CLEANUP

AT_SETUP([Err on multiple file args])
AT_KEYWORDS([file option])
_r2_check_ignore_err([foo bar baz], [1])
AT_CLEANUP

AT_SETUP([Escaped char in delimiter])
AT_KEYWORDS([option])
AT_CHECK([
	$awk '{ gsub("\t","\n\t"); print; }' < $sample/INFO2-sample1.txt > expout
	cd $sample
	$progf -t "\n\t" INFO2-sample1
],, [expout], [])
AT_CHECK([
	$awk '{ gsub("\t","\n\t"); print; }' < $sample/dir-sample1.txt > expout
	cd $sample
	$progd -t "\n\t" dir-sample1
],, [expout], [])
AT_CLEANUP

dnl vim: set ts=4 sw=4 noexpandtab :

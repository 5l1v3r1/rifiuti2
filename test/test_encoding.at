dnl -*- coding: utf-8; mode: m4; -*-
dnl vim: set fileencoding=utf-8 filetype=m4 ts=4 sw=4 noexpandtab :
dnl
dnl Test suite for rifiuti2

dnl
dnl ごみ箱 is 'recycle bin' in Japanese
dnl
AT_SETUP([Unicode characters in file argument])
AT_KEYWORDS([encoding])
AT_CHECK([
	cp $sample/japanese-path-file.txt expout
	cd $sample
	$progf ./ごみ箱/INFO2-empty
],, [expout])

AT_CHECK([
	rm -f expout
	cp $sample/japanese-path-dir.txt expout
	cd $sample
	$progd ./ごみ箱/dir-empty
],, [expout])
AT_CLEANUP

dnl
dnl Original file in Windows ANSI (CP1252), but users attempts
dnl to treat it as Shift-JIS, and fails
dnl
AT_SETUP([Err when converting from wrong charset])
AT_KEYWORDS([encoding])
AT_CHECK([
	cp $sample/INFO2-sample2-wrong-enc.txt expout
	cd $sample
	$progf -l CP932 INFO2-sample2
], 5, [expout], [ignore])
AT_CLEANUP
